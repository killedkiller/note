方法1.双写
切一个时间点 切一个idx
然后开始灌入此id之前的数据
然后重写逻辑
增加操作:写两表，
更新操作:旧表一样写新表,新表记录存在写新表
删除操作：旧表一样写新表,新表记录存在则删除
到idx之前的旧数据全部灌入

方法2:快照√
1。在某个时间t0,停某个从库，（保证数据一致性）
2.开启服务将存量的数据进行数据迁移，
3.上线新的接口，不下线老的接口
4.用户所有的请求的命令号，参数都记录下来，
5.在所有的存量数据消耗完后，将t0后的请求按时间顺序做映射到新的接口重放这些请求到新的接口
6.所有的新接口的数据操作都会发送到从库中去
7.当t0后的队列中的请求消耗完。校验接口是否正确
8.确认正确后，切备为主将从库的重构过后的数据同步到其他库中
9同步完成后下线旧的逻辑，全部请求到新街口上


方法3.停服

之后切小流量读新表，看有没有错误